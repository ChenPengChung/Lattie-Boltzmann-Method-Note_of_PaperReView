# Claude Code å°ˆæ¡ˆè¨­å®šèªªæ˜

## ğŸ“š å·²å»ºç«‹çš„æ–‡æª”

æœ¬å°ˆæ¡ˆå·²é…ç½®å®Œæ•´çš„ Claude Code å”åŠ©ç³»çµ±ï¼ŒåŒ…å«ä»¥ä¸‹æ–‡æª”ï¼š

### 1. **LBM LaTeX Helper Skill**
- **ä½ç½®ï¼š** `.claude/skills/lbm-latex-helper.md`
- **é…ç½®ï¼š** `.claude/skills/lbm-latex-helper.json`
- **åŠŸèƒ½ï¼š**
  - æ·±å…¥ç†è§£ä½ çš„ 3D ISLBM ç¨‹å¼ç¢¼ï¼ˆä½æ–¼ `0.å¯æ›´æ”¹çš„code/`ï¼‰
  - ç·¨è¼¯ `.tex` æª”æ¡ˆæ™‚æä¾›å°ˆæ¥­å»ºè­°
  - æª¢æŸ¥æ–¹ç¨‹å¼æ­£ç¢ºæ€§
  - æä¾› LaTeX æ ¼å¼å»ºè­°
  - å°ç…§ç¨‹å¼ç¢¼æä¾›å…·é«”æª”æ¡ˆè·¯å¾‘èˆ‡è¡Œè™Ÿ

### 2. **LaTeX ç·¨è­¯æŒ‡å—**
- **ä½ç½®ï¼š** `.claude/LaTeX-ç·¨è­¯æŒ‡å—.md`
- **å…§å®¹ï¼š**
  - å¸¸è¦‹ç·¨è­¯éŒ¯èª¤å¿«é€Ÿä¿®æ­£
  - å­—é«”å•é¡Œè§£æ±ºæ–¹æ¡ˆï¼ˆDFKai-SB â†’ Kaiti TCï¼‰
  - å®Œæ•´ç·¨è­¯æµç¨‹
  - ä¸­æ–‡æ”¯æ´è¨­å®š
  - ç–‘é›£æ’è§£

### 3. **LBM å…¬å¼é€ŸæŸ¥è¡¨**
- **ä½ç½®ï¼š** `.claude/LBM-LaTeX-å…¬å¼é€ŸæŸ¥è¡¨.md`
- **å…§å®¹ï¼š**
  - D3Q19 æ¨¡å‹å®Œæ•´å…¬å¼
  - MRT ç¢°æ’ç®—å­æ•¸å­¸è¡¨é”
  - ISLBM æ’å€¼å…¬å¼
  - BFL é‚Šç•Œè™•ç†
  - tanh ç¶²æ ¼è®Šæ›
  - é›·è«¾æ‡‰åŠ›å®šç¾©
  - **æ‰€æœ‰å…¬å¼éƒ½å°ç…§ç¨‹å¼ç¢¼é©—è­‰éï¼**

---

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### æ–¹æ³• 1ï¼šç·¨è¼¯ .tex æª”æ¡ˆæ™‚è‡ªå‹•å•Ÿç”¨ï¼ˆæ¨è–¦ï¼‰

ç•¶ä½ åœ¨ Claude Code ä¸­è©¢å•é—œæ–¼ LaTeX ç·¨è¼¯çš„å•é¡Œæ™‚ï¼Œç›´æ¥æå•å³å¯ï¼š

```
æˆ‘æƒ³åœ¨æ–‡æª”ä¸­åŠ å…¥ MRT ç¢°æ’ç®—å­çš„èªªæ˜ï¼Œæ‡‰è©²æ€éº¼å¯«ï¼Ÿ
```

```
evolution.h ä¸­çš„ stream_collide å‡½æ•¸åœ¨åšä»€éº¼ï¼Ÿå¹«æˆ‘å¯«æˆ LaTeX è§£é‡‹
```

```
æª¢æŸ¥é€™å€‹æ–¹ç¨‹å¼æ˜¯å¦æ­£ç¢ºï¼šf_i^eq = w_i * rho * (1 + 3*e_iÂ·u)
```

### æ–¹æ³• 2ï¼šæ‰‹å‹•å•Ÿç”¨ Skill

å¦‚æœéœ€è¦æ˜ç¢ºå•Ÿç”¨ skillï¼Œå¯ä»¥èªªï¼š

```
ä½¿ç”¨ lbm-latex-helper skill å”åŠ©æˆ‘ç·¨è¼¯é€™æ®µæ–‡å­—
```

### æ–¹æ³• 3ï¼šæŸ¥é–±åƒè€ƒæ–‡æª”

ç›´æ¥é–‹å•Ÿåƒè€ƒæ–‡æª”æŸ¥çœ‹ï¼š
- `cat .claude/LBM-LaTeX-å…¬å¼é€ŸæŸ¥è¡¨.md` - æŸ¥çœ‹æ‰€æœ‰å…¬å¼
- `cat .claude/LaTeX-ç·¨è­¯æŒ‡å—.md` - æŸ¥çœ‹ç·¨è­¯æŒ‡å—

---

## ğŸ“– Skill èƒ½åšä»€éº¼

### âœ… æŠ€è¡“æº–ç¢ºæ€§æª¢æŸ¥

**ç¯„ä¾‹ï¼š**
```
ä½¿ç”¨è€…ï¼šé€™å€‹å…¬å¼å°å—ï¼Ÿ
f_i^eq = w_i * Ï * (1 + 3*e_iÂ·u + 9/2*(e_iÂ·u)^2 - 3/2*uÂ·u)

Claudeï¼šæ˜¯çš„ï¼é€™æ˜¯æ­£ç¢ºçš„å¹³è¡¡åˆ†ä½ˆå‡½æ•¸ã€‚å°æ‡‰ç¨‹å¼ç¢¼ä½æ–¼ï¼š
evolution.h:281-299

LaTeX å¯«æ³•å»ºè­°ï¼š
\begin{equation}
f_i^{eq} = w_i \rho \left[1 + 3(\mathbf{e}_i \cdot \mathbf{u}) +
\frac{9}{2}(\mathbf{e}_i \cdot \mathbf{u})^2 - \frac{3}{2}(\mathbf{u} \cdot \mathbf{u})\right]
\end{equation}
```

### âœ… ç¨‹å¼ç¢¼è§£é‡‹ â†’ LaTeX æ–‡æª”

**ç¯„ä¾‹ï¼š**
```
ä½¿ç”¨è€…ï¼ševolution.h çš„ BFL è™•ç†éƒ¨åˆ†ï¼ˆline 194-198ï¼‰åœ¨åšä»€éº¼ï¼Ÿ
å¹«æˆ‘å¯«æˆ LaTeX èªªæ˜

Claudeï¼šé€™æ®µç¨‹å¼ç¢¼å¯¦ä½œé‚Šç•Œè²¼åˆæ ¼é»ï¼ˆBFLï¼‰çš„æ’å€¼ç­–ç•¥ã€‚LaTeX èªªæ˜å¦‚ä¸‹ï¼š

ç•¶æ ¼é»é è¿‘å›ºé«”é‚Šç•Œæ™‚ï¼Œæ ¹æ“šå“è³ªå› å­ $Q$ æ¡ç”¨ä¸åŒçš„æ’å€¼ç­–ç•¥ï¼š

\begin{itemize}
\item è‹¥ $Q > 0.5$ï¼šä½¿ç”¨ç·šæ€§æ’å€¼
\begin{equation}
f_i(\mathbf{x}_f, t+\Delta t) = \frac{1}{2Q} f_{\bar{i}}(\mathbf{x}_f, t) +
\frac{2Q-1}{2Q} f_i(\mathbf{x}_f, t)
\end{equation}

\item è‹¥ $Q \leq 0.5$ï¼šä½¿ç”¨6éš Lagrange æ’å€¼è‡³è™›æ“¬é‚Šç•Œé»
\begin{equation}
f_i(\mathbf{x}_f, t+\Delta t) = \text{Intrpl7}[f_{\bar{i}}(\mathbf{x}_b^*, t)]
\end{equation}
\end{itemize}

å…¶ä¸­ $Q$ ç‚ºå“è³ªå› å­ï¼Œ$\bar{i}$ ç‚ºåå‘é€Ÿåº¦æ–¹å‘ã€‚
```

### âœ… LaTeX æ ¼å¼å„ªåŒ–

**ç¯„ä¾‹ï¼š**
```
ä½¿ç”¨è€…ï¼šé€™æ®µ LaTeX å¯«æ³•æœ‰å•é¡Œå—ï¼Ÿ
\tau_ij = u_i'u_j'

Claudeï¼šå»ºè­°æ”¹é€²ï¼š

1. éœ€è¦åŠ å…¥æ™‚é–“å¹³å‡ç¬¦è™Ÿï¼š\overline{...}
2. è…³æ¨™æ‡‰è©²æ­£é«”ï¼šä½¿ç”¨ \mathrm æˆ–ç›´æ¥å¯«
3. å®Œæ•´å¯«æ³•ï¼š

\begin{equation}
\tau_{ij} = \overline{u_i' u_j'} = \overline{u_i u_j} - \overline{u_i}\,\overline{u_j}
\end{equation}

å°æ‡‰ç¨‹å¼ç¢¼ï¼šstatistics.hï¼ˆé›·è«¾æ‡‰åŠ›è¨ˆç®—ï¼‰
```

### âœ… ç·¨è­¯éŒ¯èª¤è¨ºæ–·

**ç¯„ä¾‹ï¼š**
```
ä½¿ç”¨è€…ï¼šç·¨è­¯å‡ºç¾ "fontspec requires XeTeX" éŒ¯èª¤

Claudeï¼šé€™æ˜¯å› ç‚ºä½¿ç”¨äº† pdflatex ç·¨è­¯ã€‚è§£æ±ºæ–¹æ³•ï¼š

1. æ”¹ç”¨ xelatexï¼š
   xelatex your_file.tex

2. å¦‚æœæœ‰ä¸­æ–‡å­—é«”éŒ¯èª¤ï¼ˆDFKai-SB not foundï¼‰ï¼Œä¿®æ”¹ .tex æª”æ¡ˆï¼š
   å°‡ \setCJKmonofont{DFKai-SB}
   æ”¹ç‚º \setCJKmonofont{Kaiti TC}

è©³ç´°èªªæ˜è«‹åƒè€ƒï¼š.claude/LaTeX-ç·¨è­¯æŒ‡å—.md
```

---

## ğŸ¯ æ ¸å¿ƒç¨‹å¼ç¢¼åƒè€ƒ

Skill å·²æ·±å…¥åˆ†æä»¥ä¸‹æª”æ¡ˆï¼ˆä½æ–¼ `0.å¯æ›´æ”¹çš„code/`ï¼‰ï¼š

| æª”æ¡ˆ | å¤§å° | é—œéµåŠŸèƒ½ |
|------|------|----------|
| `evolution.h` | 82KB | ä¸»è¦æ™‚é–“æ¨é€²ã€stream-collide kernel |
| `interpolationHillISLBM.h` | 29KB | Periodic Hill å°ˆç”¨æ’å€¼ |
| `MRT_Process.h` | 27KB | MRT ç¢°æ’ç®—å­å¯¦ä½œ |
| `MRT_Matrix.h` | 8KB | è®Šæ›çŸ©é™£ M èˆ‡é¬†å¼›çŸ©é™£ S |
| `initialization.h` | 16KB | åˆå§‹åŒ–ã€ç¶²æ ¼ç”Ÿæˆ |
| `initializationTool.h` | 7KB | Lagrange æ’å€¼ã€tanh è®Šæ› |
| `model.h` | 4KB | Periodic Hill å¹¾ä½•å‡½æ•¸ |
| `variables.h` | 3KB | å…¨åŸŸåƒæ•¸è¨­å®š |
| `memory.h` | 11KB | GPU/CPU è¨˜æ†¶é«”ç®¡ç† |
| `communication.h` | 10KB | MPI å¹³è¡Œé€šè¨Š |
| `fileIO.h` | 22KB | Tecplot/äºŒé€²ä½ I/O |
| `statistics.h` | 11KB | æ¹æµçµ±è¨ˆé‡ |

---

## ğŸ”§ å¸¸è¦‹ä½¿ç”¨æƒ…å¢ƒ

### æƒ…å¢ƒ 1ï¼šæ’°å¯«æ–¹æ³•ç« ç¯€

```
æˆ‘è¦å¯« ISLBM æ–¹æ³•çš„ç« ç¯€ï¼ŒåŒ…å«ï¼š
1. åŸºæœ¬ LBM æ–¹ç¨‹
2. MRT ç¢°æ’ç®—å­
3. 6éšæ’å€¼
4. BFL é‚Šç•Œè™•ç†

å¹«æˆ‘çµ„ç¹”å…§å®¹ä¸¦æä¾› LaTeX ç¨‹å¼ç¢¼
```

### æƒ…å¢ƒ 2ï¼šé©—è­‰å…¬å¼æ­£ç¢ºæ€§

```
evolution.h:281 çš„å¹³è¡¡åˆ†ä½ˆå‡½æ•¸è¨ˆç®—ï¼Œ
å°æ‡‰çš„æ•¸å­¸å…¬å¼æ‡‰è©²æ€éº¼å¯«ï¼Ÿè«‹é©—è­‰æˆ‘çš„ LaTeX æ˜¯å¦æ­£ç¢º
```

### æƒ…å¢ƒ 3ï¼šè§£é‡‹ç¨‹å¼ç¢¼ç´°ç¯€

```
interpolationHillISLBM.h ä¸­çš„ F7_Intrpl7 å‡½æ•¸ï¼Œ
å®ƒåœ¨åšä»€éº¼ï¼Ÿç‚ºä»€éº¼éœ€è¦ 3D æ’å€¼ï¼Ÿ
å¹«æˆ‘å¯«æˆæ–‡å­—èªªæ˜åŠ æ•¸å­¸å…¬å¼
```

### æƒ…å¢ƒ 4ï¼šä¿®æ­£ç·¨è­¯éŒ¯èª¤

```
æˆ‘çš„ tex æª”æ¡ˆç·¨è­¯å¤±æ•—ï¼ŒéŒ¯èª¤è¨Šæ¯æ˜¯ï¼š
Missing character: There is no ä¸­ (U+4E2D) in font [lmmono10-regular]
æ€éº¼è§£æ±ºï¼Ÿ
```

---

## ğŸ“ å°ˆæ¡ˆåƒæ•¸é€ŸæŸ¥

å¾ `variables.h` èˆ‡ç¨‹å¼ç¢¼åˆ†æå¾—å‡ºï¼š

```latex
\begin{itemize}
\item å€åŸŸå°ºå¯¸ï¼š$L_x \times L_y \times L_z = 4.5 \times 9.0 \times 3.036$
\item ç¶²æ ¼è§£æåº¦ï¼š$32 \times 128 \times 64$ï¼ˆå«ç·©è¡å±¤ï¼š$39 \times 135 \times 70$ï¼‰
\item é›·è«¾æ•¸ï¼š$\mathrm{Re} = 50$
\item é¬†å¼›æ™‚é–“ï¼š$\tau = 0.6833$
\item CFL æ•¸ï¼š$0.6$
\item è¿‘å£ç¶²æ ¼é–“è·ï¼š$h_{min} = 0.001$
\item MPI å€åŸŸåˆ†è§£ï¼šY æ–¹å‘ 4 å€‹ processes
\item é€Ÿåº¦æ¨¡å‹ï¼šD3Q19
\item ç¢°æ’ç®—å­ï¼šMRT (Multiple Relaxation Time)
\item æ’å€¼éšæ•¸ï¼š6 éš Lagrange
\end{itemize}
```

---

## ğŸ› å·²çŸ¥å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ

### å•é¡Œ 1ï¼šmacOS ä¸Šæ‰¾ä¸åˆ° DFKai-SB å­—é«”

**ç—‡ç‹€ï¼š**
```
kpathsea: Running mktextfm DFKai-SB/OT
mktextfm: `mf-nowin -progname=mf ...' failed to make OT.tfm.
```

**è§£æ±ºï¼š**
åœ¨ `.tex` æª”æ¡ˆä¸­ä¿®æ”¹ï¼š
```latex
\setCJKmonofont{Kaiti TC}  % æ”¹ç”¨ macOS å…§å»ºå­—é«”
```

è©³è¦‹ï¼š`.claude/LaTeX-ç·¨è­¯æŒ‡å—.md`

### å•é¡Œ 2ï¼šç¨‹å¼ç¢¼å€å¡Šä¸­æ–‡é¡¯ç¤ºç©ºç™½

**åŸå› ï¼š** `lmmono10-regular` ä¸æ”¯æ´ä¸­æ–‡

**è§£æ±ºï¼š** ç¢ºä¿è¨­å®š CJK ç­‰å¯¬å­—é«”
```latex
\setCJKmonofont{Kaiti TC}
```

### å•é¡Œ 3ï¼šäº¤å‰å¼•ç”¨æœªå®šç¾©

**è§£æ±ºï¼š** åŸ·è¡Œå…©æ¬¡ç·¨è­¯
```bash
xelatex file.tex
xelatex file.tex
```

---

## ğŸ“š å»¶ä¼¸é–±è®€

### ç¨‹å¼ç¢¼å…§éƒ¨æ–‡æª”
- `evolution.h`ï¼šåŒ…å«è©³ç´°çš„æ¼”ç®—æ³•è¨»è§£
- `MRT_Process.h`ï¼šMRT æ–¹æ³•çš„æ•¸å­¸æ¨å°
- `model.h`ï¼šPeriodic Hill å¹¾ä½•å®šç¾©

### å¤–éƒ¨åƒè€ƒ
æœ¬å°ˆæ¡ˆåŸºæ–¼ä»¥ä¸‹æ–¹æ³•ï¼š
- **ISLBM**: Interpolated Streamlines Lattice Boltzmann Method
- **MRT**: Tim KrÃ¼ger et al., "The Lattice Boltzmann Method"
- **Periodic Hill**: Almeida et al. (2017) benchmark case

---

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

1. **ç·¨è¼¯ .tex æ™‚éš¨æ™‚ç™¼å•**ï¼šä¸ç”¨æ“”å¿ƒå•é¡Œå¤ªç´°ï¼Œskill äº†è§£ä½ çš„æ•´å€‹ç¨‹å¼ç¢¼æ¶æ§‹
2. **è¦æ±‚å°ç…§ç¨‹å¼ç¢¼**ï¼šè©¢å•æ™‚åŠ ä¸Šã€Œè«‹æä¾›ç¨‹å¼ç¢¼ä½ç½®ã€
3. **é©—è­‰å…¬å¼**ï¼šè²¼ä¸Šä½ çš„ LaTeXï¼Œè«‹ Claude å°ç…§ç¨‹å¼ç¢¼æª¢æŸ¥
4. **å¿«é€ŸæŸ¥è¡¨**ï¼šç›´æ¥æŸ¥é–± `LBM-LaTeX-å…¬å¼é€ŸæŸ¥è¡¨.md`
5. **ç·¨è­¯å•é¡Œ**ï¼šå…ˆæŸ¥ `LaTeX-ç·¨è­¯æŒ‡å—.md`ï¼Œæ‰¾ä¸åˆ°è§£æ±ºæ–¹æ¡ˆå†ç™¼å•

---

## ğŸ‰ é–‹å§‹ä½¿ç”¨

**ç«‹å³å˜—è©¦ï¼š**
```
åœ¨ Claude Code ä¸­è¼¸å…¥ï¼š

ã€Œæˆ‘æƒ³åœ¨æ–‡æª”ä¸­è§£é‡‹ evolution.h çš„ stream_collide kernelï¼Œ
å¹«æˆ‘å¯«ä¸€æ®µåŒ…å«æ•¸å­¸å…¬å¼çš„ LaTeX èªªæ˜ã€
```

Claude æœƒè‡ªå‹•ç†è§£ä½ çš„ç¨‹å¼ç¢¼ä¸¦æä¾›å°ˆæ¥­å»ºè­°ï¼

---

**ç‰ˆæœ¬ï¼š** 1.0
**å»ºç«‹æ—¥æœŸï¼š** 2026-01-06
**é©ç”¨å°ˆæ¡ˆï¼š** 3D ISLBM Periodic Hill Simulation
